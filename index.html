<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI Story ‚Üí Video Generator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#0f172a;
  color:#fff;
  text-align:center;
  padding:20px;
}
h1{color:#38bdf8;}
textarea{
  width:100%;
  max-width:650px;
  height:170px;
  padding:15px;
  font-size:16px;
  border-radius:10px;
  border:none;
}
select,input{
  margin-top:12px;
  padding:10px;
  border-radius:8px;
  border:none;
}
button{
  margin-top:18px;
  padding:14px 30px;
  font-size:16px;
  border:none;
  border-radius:10px;
  background:#38bdf8;
  color:#000;
  font-weight:bold;
}
button:disabled{background:gray;}
#status{
  margin-top:20px;
  font-size:16px;
  color:#facc15;
}
#videoBox{
  display:none;
  margin-top:25px;
  padding:15px;
  border:2px dashed #38bdf8;
  border-radius:10px;
}
.info{
  margin-top:25px;
  font-size:14px;
  opacity:0.9;
}
.popup{
  display:none;
  position:fixed;
  top:0;left:0;
  width:100%;height:100%;
  background:rgba(0,0,0,0.8);
}
.popup-content{
  background:#020617;
  margin:25% auto;
  padding:20px;
  width:80%;
  max-width:320px;
  border-radius:10px;
}
</style>
</head>

<body>

<h1>AI Story ‚Üí Animation Video</h1>
<p>Story likho (kisi bhi language me)</p>

<textarea id="story" placeholder="Yahan apni story likho..."></textarea>

<br>

<select id="type">
  <option value="anime">Anime</option>
  <option value="cartoon">Cartoon</option>
  <option value="humanity">Humanity</option>
</select>

<br>

<label>Speed:</label>
<input type="range" id="speed" min="0.8" max="1.2" step="0.1" value="1">

<br>

<button id="generateBtn" onclick="generateVideo()">Generate Video</button>

<div id="status"></div>

<div id="videoBox">
  <p>üé¨ Video Playing</p>
  <p>üîä Voice synced with video</p>
  <button onclick="downloadDemo()">Download Video</button>
</div>

<div class="info">
‚Ä¢ Daily limit: 10 videos / 24h<br>
‚Ä¢ Max length: 30 minutes<br>
‚Ä¢ Voice auto added<br>
‚Ä¢ No watermark (demo)
</div>

<div class="popup" id="popup">
  <div class="popup-content">
    <p id="popupText"></p>
    <button onclick="closePopup()">OK</button>
  </div>
</div>

<script>
/* ---------- LIMIT SYSTEM ---------- */
let count = localStorage.getItem("count") || 0;
let day = localStorage.getItem("day") || new Date().toDateString();
if(day !== new Date().toDateString()){
  count = 0;
  localStorage.setItem("day",new Date().toDateString());
  localStorage.setItem("count",0);
}

/* ---------- POPUP ---------- */
function popup(msg){
  document.getElementById("popupText").innerText = msg;
  document.getElementById("popup").style.display="block";
}
function closePopup(){
  document.getElementById("popup").style.display="none";
}

/* ---------- MAIN ---------- */
function generateVideo(){
  const story = document.getElementById("story").value.trim();
  const btn = document.getElementById("generateBtn");

  if(story.length < 20){
    popup("Please thori lambi story likho");
    return;
  }

  if(count >= 10){
    popup("Daily limit reached (10 videos / 24h)");
    return;
  }

  const words = story.split(/\s+/).length;
  const minutes = Math.ceil(words / 150);
  if(minutes > 30){
    popup("Video 30 minutes se zyada ho sakti hai");
    return;
  }

  count++;
  localStorage.setItem("count",count);

  btn.disabled = true;
  document.getElementById("status").innerText = "‚è≥ Video processing...";
  document.getElementById("videoBox").style.display="none";

  // fake backend delay
  setTimeout(()=>{
    document.getElementById("status").innerText = "‚ñ∂Ô∏è Video playing";
    document.getElementById("videoBox").style.display="block";
    btn.disabled = false;
    playVoice(story);
  }, 8000);
}

/* ---------- VOICE (SYNCED) ---------- */
function playVoice(text){
  if(!window.speechSynthesis) return;
  const utter = new SpeechSynthesisUtterance(text);
  utter.rate = document.getElementById("speed").value;
  speechSynthesis.cancel();
  speechSynthesis.speak(utter);
}

/* ---------- DOWNLOAD ---------- */
function downloadDemo(){
  alert("Demo mode:\nBackend connect hone ke baad real MP4 download milega.");
}
</script>

</body>
</html>